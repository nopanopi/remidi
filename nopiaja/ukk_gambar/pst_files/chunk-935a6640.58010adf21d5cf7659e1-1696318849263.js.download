(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-935a6640"],{1478:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"chatbot-widget"}},[t.toggleLiveChatIsActive?e("div",{staticClass:"live-chat--toggle"},[e("a",{staticClass:"live-chat--toggle--button-close",on:{click:function(e){return e.preventDefault(),t.closeLiveChatToggleWidget(!0)}}},[e("img",{attrs:{src:"https://s3-ap-southeast-1.amazonaws.com/img-sociolla/chatbot/icon-black-close-rounded.svg"}})]),e("div",{staticClass:"live-chat--toggle--icon"},[e("div",{on:{click:function(e){return t.showWidgetLiveChat(!0)}}},[e("img",{attrs:{src:"https://cdn.livechatinc.com/cloud/?uri=https%3A%2F%2Flivechat.s3.amazonaws.com%2F11823918%2F0%2Fbutton%2Fonline%2F9ca86d516ad63945ef7bb4e6370e2cbd.png",alt:"Beauty Assistant",title:"Beauty Assistant"}})])])]):t._e(),e("div",{staticClass:"live-chat--widget",class:{active:t.widgetIsActive}},[e("div",{staticClass:"w-h-100"},[e("div",{staticClass:"live-chat--widget--box"},[e("div",{staticClass:"live-chat--widget--main"},[t.isShowPopupEndChat?e("PopupCloseChat",{on:{closePopup:function(e){return t.showPopupEndChat(!1)},endChat:function(e){return t.backToMainSection()}}}):t._e(),t.isShowPopupRate?e("PopupRate",{on:{closePopupRate:function(e){return t.showPopupRate(!1)}}}):t._e(),e("div",{staticClass:"live-chat--widget--main--header"},[e("ChatRingtone"),t._m(0),"LiveChat"!==t.$route.name?e("div",{staticClass:"header-button"},[e("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Perkecil jendela",classes:"tooltips-livechat-toggle"},expression:"{\n                    content: 'Perkecil jendela',\n                    classes: 'tooltips-livechat-toggle',\n                  }"}],staticClass:"header-button--icon",attrs:{type:"button"},on:{click:function(e){return t.showWidgetLiveChat(!1)}}},[e("img",{attrs:{width:"17",height:"2",src:"https://s3-ap-southeast-1.amazonaws.com/img-sociolla/chatbot/icon-min-white.svg"}})])]):t._e(),!t.chatId||t.feedbackShow||t.isEndChat||"LiveChat"===t.$route.name?t._e():e("div",{staticClass:"header-button"},[e("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Tutup obrolan",classes:"tooltips-livechat-toggle"},expression:"{\n                    content: 'Tutup obrolan',\n                    classes: 'tooltips-livechat-toggle',\n                  }"}],staticClass:"header-button--icon",attrs:{type:"button"},on:{click:function(e){return t.showPopupEndChat(!0)}}},[e("img",{staticClass:"header-button--icon icon-close",attrs:{src:"https://s3-ap-southeast-1.amazonaws.com/img-sociolla/chatbot/icon-white-close.svg"}})])])],1),t.isWorkingHoursLoaded?[t.isOnline?[t.chatId?[t.feedbackShow||t.isEndChat?t._e():e("ChatHeader"),e("div",{staticClass:"live-chat--widget--main--content"},[e("div",{staticClass:"live-chat--widget--main--content--wrap",attrs:{id:"main-threads"}},[e("ThreadCustomerInfo"),e("Threads",{attrs:{"user-message":t.chat,"popup-rate-closed":t.isShowPopupRate,"chat-ended":t.feedbackShow||t.isEndChat},on:{userSeemsWantToEndChat:function(e){return t.backToMainSection()},baEndTheChat:function(e){return t.backToMainSection()},endChatBecauseInactive:function(e){return t.backToMainSection()}}}),t.feedbackShow||t.isEndChat?e("FeedbackForm",{on:{restartChat:t.restartChat}}):t._e()],1)]),t.chatAttachments&&t.chatAttachments.length?e("ChatAttachementSender"):t._e(),t.feedbackShow||t.isEndChat?t._e():e("ChatSender",{on:{send:t.send}})]:[e("div",{staticClass:"live-chat--widget--main--content"},[e("div",{staticClass:"reconnect hidden"},[t._v("Menyambungkan ulangâ€¦")]),e("start-conversation",{attrs:{"widget-is-active":t.widgetIsActive}})],1)]]:[t.successfulFormSubmit?[t._m(1)]:[e("div",{staticClass:"live-chat--widget--main--content"},[e("OfflineForm",{on:{successfulFormSubmit:function(e){t.successfulFormSubmit=!0}}})],1)]]]:t._e()],2)])])])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"live-chat--widget--main--header--title"},[e("div",[e("h1",{staticClass:"live-chat--widget--main--header--title--text"},[t._v("Beauty Assistant")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"live-chat--widget--main--content"},[e("div",{staticClass:"live-chat--widget--main--content--wrap"},[e("div",{staticClass:"d-flex mb-1em"},[e("div",{staticClass:"live-chat--widget--form-message"},[e("div",{staticClass:"transition-delay"},[e("div",{staticClass:"pt-21"},[e("div",{staticClass:"form success-form"},[e("div",{staticClass:"form--icon"},[e("div",{staticClass:"form--icon--checklist"},[e("img",{attrs:{src:"https://s3-ap-southeast-1.amazonaws.com/img-sociolla/chatbot/icon-checklist-black.svg"}})])]),e("div",{staticClass:"form--content"},[e("div",{staticClass:"h-auto p-8"},[e("div",{staticClass:"form-offline-form--header"},[e("span",[t._v("Terima kasih! Pesanmu telah terkirim. Tim bantuan kami akan segera menghubungimu.")])])])])])])])])])])])}],s=n("c7eb"),o=n("1da1"),c=(n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("a434"),n("7db0"),n("92fb").default),r={namespaced:!0,state:{chat_id:"",chat_online:!1,chat_working_hour_start:"",chat_working_hour_end:"",customer_name:"",customer_email:"",customer_id:"",customer_rate:"",customer_comment:"",customer_chat_id:"",customer_active:!0,customer_tone:!0,chat_attachments:[],send_attachment:!1,endChat:!1},mutations:{setWorkingHours:function(t,e){var n=e.start_time,a=e.end_time;t.chat_working_hour_start=n,t.chat_working_hour_end=a},setChatId:function(t,e){t.chat_id=e},setCustomerInfo:function(t,e){var n=e.name,a=e.email,i=e.id;t.customer_name=n||"",t.customer_email=a||"",t.customer_id=i||""},setCustomerRate:function(t,e){t.customer_rate=e},setCustomerComment:function(t,e){t.customer_comment=e},setCustomerChatId:function(t,e){t.customer_chat_id=e},setCustomerActive:function(t,e){t.customer_active=e},setCustomerTone:function(t,e){t.customer_tone=e},setChatOnline:function(t,e){t.chat_online=e},addAttachment:function(t,e){t.chat_attachments=t.chat_attachments.concat(e)},updateAttachment:function(t,e){this._vm.$set(t.chat_attachments[e.index],e.field,e.value)},deleteAttachment:function(t,e){t.chat_attachments.splice(e,1)},sendAttachment:function(t,e){t.send_attachment=new Date},resetAttachment:function(t){t.chat_attachments=[]},endChat:function(t,e){t.endChat=e}},actions:{startConversation:function(t,e){t.commit,t.state,t.dispatch,t.rootState;return axios.post("".concat(c.MS_CHATBOT_API_URL,"/chat"),e)},upload:function(t,e){var n=t.commit,a=(t.state,e.index),i=e.filename,s=e.fileBlob,o=e.fileType;n("updateAttachment",{index:a,field:"processed",value:!0});var r="",h=o;h.indexOf("quicktime")>-1&&(h="mov"),h.indexOf("x-msvideo")>-1&&(h="avi"),h.indexOf("3gpp")>-1&&(h="3gp"),axios.get("".concat(c.MS_SOCO_PUBLIC_API_URL,"/pre-signed-url"),{params:{fileName:"".concat(i,".").concat(h),contentType:s.type}}).then((function(t){return delete axios.defaults.withCredentials,r=t.data.data.url,axios.put(t.data.data.signedUrl,s,{headers:{"Content-Type":s.type}})})).then((function(){s.type.indexOf("image")>-1&&n("updateAttachment",{index:a,field:"src",value:r}),n("updateAttachment",{index:a,field:"url",value:r}),n("updateAttachment",{index:a,field:"loading",value:!1})})).catch((function(t){console.log(t),n("updateAttachment",{index:a,field:"loading",value:!1})}))},submitFeedback:function(t,e){t.commit;return axios.post("".concat(c.MS_CHATBOT_API_URL,"/user-feedback"),e)},submitOfflineMsg:function(t,e){t.commit;return axios.post("".concat(c.MS_CHATBOT_API_URL,"/enter"),e)},getChatOnline:function(t){var e=t.state,n=t.commit;return axios.get("".concat(c.MS_CHATBOT_API_URL,"/working-hours")).then((function(t){var a=dayjs().tz("Asia/Jakarta"),i=a.$H,s=dayjs(a).locale("en").format("dddd"),o=t.data.data[0].working_days.find((function(t){return t.day==s.toLowerCase()})),c=o.start_time,r=o.end_time;n("setWorkingHours",{start_time:c,end_time:r});var h=e.chat_working_hour_start.split(":")[0],u=e.chat_working_hour_end.split(":")[0];return n("setChatOnline",i>=h&&i<u),t})).catch((function(t){return console.log(t),n("setWorkingHours",{start_time:"09:00:00",end_time:"17:00:00"}),t}))}}},h={name:"LiveChat",components:{StartConversation:function(){return n.e("chunk-afff0fc8").then(n.bind(null,"4e75"))},FeedbackForm:function(){return n.e("chunk-bc78fe3e").then(n.bind(null,"74d9"))},OfflineForm:function(){return n.e("chunk-5fb13a3c").then(n.bind(null,"8f94"))},ChatSender:function(){return n.e("chunk-2d0e273e").then(n.bind(null,"7f81"))},ChatAttachementSender:function(){return n.e("chunk-2d0c7f03").then(n.bind(null,"536e"))},Threads:function(){return Promise.all([n.e("vendor-~-index.js"),n.e("vendor-~-web.url.constructor.js"),n.e("vendor-~-browser.js"),n.e("chunk-48afab72"),n.e("chunk-6d1b1fb3")]).then(n.bind(null,"cd8b"))},ThreadCustomerInfo:function(){return n.e("chunk-2d21331a").then(n.bind(null,"ac46"))},ChatHeader:function(){return n.e("chunk-2d0da931").then(n.bind(null,"6bd3"))},PopupRate:function(){return n.e("chunk-2d2086c9").then(n.bind(null,"a576"))},PopupCloseChat:function(){return n.e("chunk-2d0e2cd0").then(n.bind(null,"7ff1"))},ChatRingtone:function(){return n.e("chunk-2d0d6736").then(n.bind(null,"7337"))}},props:{ForceOpen:{required:!1,type:Boolean,default:!1},widgetCloseCallback:{required:!1,type:Boolean,default:!1}},data:function(){return{isShowToggle:"",widgetIsActive:!1,toggleLiveChatIsActive:!1,successfulFormSubmit:!1,successfulDirectChat:!1,isShowPopupEndChat:!1,isShowPopupRate:!1,isRateQuestion:"",feedbackShow:!1,chat:{},isWorkingHoursLoaded:!1}},computed:{isEndChat:function(){return this.$store.state.$_ChatbotWidget.endChat},el:function(){return this.$refs["show-toggle-".concat(this.isShowToggle)]},chatId:function(){return this.$store.state.$_ChatbotWidget&&this.$store.state.$_ChatbotWidget.chat_id},customerName:function(){return this.$store.state.$_ChatbotWidget&&this.$store.state.$_ChatbotWidget.customer_name},customerEmail:function(){return this.$store.state.$_ChatbotWidget&&this.$store.state.$_ChatbotWidget.customer_email},isRate:function(){return this.$store.state.$_ChatbotWidget&&this.$store.state.$_ChatbotWidget.customer_rate},chatAttachments:function(){return this.$store.state.$_ChatbotWidget.chat_attachments},isOnline:function(){return this.$store.state.$_ChatbotWidget.chat_online}},watch:{isRate:function(t,e){t&&this.showPopupRate(!0)}},created:function(){var t="$_ChatbotWidget";t in this.$store._modules.root._children||this.$store.registerModule(t,r),document.addEventListener("click",this.documentClick),this.ForceOpen&&(this.showWidgetLiveChat(!0),this.toggleLiveChatIsActive=!1)},beforeDestroy:function(){this.$store.commit("$_ChatbotWidget/setChatId","")},destroyed:function(){this.classBodyActiveWidget(!1),document.removeEventListener("click",this.documentClick)},methods:{send:function(t){this.chat=t},documentClick:function(t){var e=t.target;this.el&&this.el!==e&&!this.el.contains(e)&&(this.isShowToggle="")},closeLiveChatToggleWidget:function(){this.toggleLiveChatIsActive=!1,this.$emit("widgetClosed")},decideChatOnline:function(){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isOnline){e.next=7;break}if(!t.$route.query.forcechatbotonline){e.next=5;break}t.$store.commit("$_ChatbotWidget/setChatOnline",!0),e.next=7;break;case 5:return e.next=7,t.$store.dispatch("$_ChatbotWidget/getChatOnline").then((function(){t.isWorkingHoursLoaded=!0,t.classBodyActiveWidget(!0)})).catch((function(e){t.isWorkingHoursLoaded=!0,console.error(e)}));case 7:case"end":return e.stop()}}),e)})))()},showWidgetLiveChat:function(t){this.widgetIsActive=t,t?(this.decideChatOnline(),this.classBodyActiveWidget(!0)):(this.ForceOpen&&this.widgetCloseCallback&&this.$emit("widgetClosed"),this.classBodyActiveWidget(!1))},showToggle:function(t){this.isShowToggle=this.isShowToggle===t?"":t},setRateQuestion:function(t){this.isRateQuestion=t},showPopupEndChat:function(t){this.isShowPopupEndChat=t},showPopupRate:function(t){this.isShowPopupRate=t},backToMainSection:function(){this.isShowPopupEndChat=!1,this.feedbackShow=!0},classBodyActiveWidget:function(t){var e=document.getElementsByTagName("body")[0];e&&t?e.classList.add("chatbot-active"):e.classList.remove("chatbot-active")},restartChat:function(){this.feedbackShow=!1,this.$store.commit("$_ChatbotWidget/endChat",!1)}}},u=h,d=(n("b4bd"),n("de02"),n("2877")),l=Object(d["a"])(u,a,i,!1,null,"266b3a3f",null);e["default"]=l.exports},b4bd:function(t,e,n){"use strict";n("e7f1")},de02:function(t,e,n){"use strict";n("e845")},e7f1:function(t,e,n){},e845:function(t,e,n){}}]);